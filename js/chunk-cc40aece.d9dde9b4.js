(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc40aece"],{"0143":function(t,a,e){},"02eb":function(t,a,e){"use strict";e("6b0a")},"1b87":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"favorite-icon-wrapper"},[e("div",{ref:"signTip",staticClass:"sign-tip",style:{opacity:0,zIndex:2,transition:"opacity .2s ease-in-out"}}),t.isAuthenticated&&t.favoriteProducts.includes(t.id)?t._e():e("i",{staticClass:"far fa-heart add-favorite favorite-icon",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addFavorite(t.id)}}}),e("transition",{attrs:{name:"popup"}},[t.isAuthenticated&&t.favoriteProducts.includes(t.id)?e("i",{staticClass:"fas fa-heart remove-favorite favorite-icon",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.removeFavorite(t.id)}}}):t._e()])],1)},s=[],r=e("5530"),c=(e("a9e3"),e("2f62")),n={props:{id:{type:Number,required:!0}},computed:Object(r["a"])({},Object(c["b"])(["favoriteProducts","isAuthenticated"])),methods:{addFavorite:function(t){var a=this;if(!this.isAuthenticated)return this.$refs.signTip.style.opacity=1,void setTimeout((function(){a.$refs.signTip.style.opacity=0,a.$EventBus.$emit("openSignForm",!0)}),800);this.$store.commit("addFavorite",t)},removeFavorite:function(t){var a=this;if(!this.isAuthenticated)return this.$refs.signTip.style.opacity=1,void setTimeout((function(){a.$refs.signTip.style.opacity=0,a.$EventBus.$emit("openSignForm",!0)}),800);this.$store.commit("removeFavorite",t)}}},o=n,u=(e("668d"),e("2877")),d=Object(u["a"])(o,i,s,!1,null,null,null);a["a"]=d.exports},4444:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"user-tab-wrapper"},[e("div",{staticClass:"user-info"},[e("img",{attrs:{src:t.avatar,alt:""}}),e("div",{staticClass:"user-account"},[t._v(t._s(t.name||t.email))])]),e("div",{staticClass:"user-tab"},[e("router-link",{staticClass:"user-tab-link",attrs:{to:"/user"}},[e("div",{staticClass:"user-tab-item"},[e("i",{staticClass:"icon-settings"}),t._v(" 帳號管理")])]),e("router-link",{staticClass:"user-tab-link",attrs:{to:"/user/orderlist"}},[e("div",{staticClass:"user-tab-item"},[e("i",{staticClass:"icon-note"}),t._v(" 訂單查詢 ")])]),e("router-link",{staticClass:"user-tab-link",attrs:{to:"/user/favorites"}},[e("div",{staticClass:"user-tab-item"},[e("i",{staticClass:"icon-heart"}),t._v(" 我的收藏 ")])])],1)])},s=[],r=e("5530"),c=(e("b0c0"),e("2f62")),n={props:{formData:{type:Object}},data:function(){return{avatar:"",name:"",email:""}},created:function(){var t=this.$store.state.user,a=t.name,e=t.email,i=t.avatar;this.name=a,this.email=e,this.avatar=i||"https://i.imgur.com/hyCLvT0.png"},watch:{formData:{handler:function(t){this.avatar=t.avatar?t.avatar:this.$store.state.user.avatar},deep:!0}},computed:Object(r["a"])({},Object(c["b"])(["isAuthenticated","user"]))},o=n,u=(e("b63e"),e("2877")),d=Object(u["a"])(o,i,s,!1,null,"5e25f964",null);a["a"]=d.exports},"48d5":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"user-container-wapper"},[t.isAuthenticated?e("div",{staticClass:"user-container"},[e("UserTab"),e("div",{staticClass:"user-content"},[e("div",{staticClass:"user-content-title"},[t._v(" 我的收藏 ")]),0===t.favorites.length?[t._m(0)]:t._e(),e("transition",{attrs:{name:"fade"}},[0!==t.favorites.length?e("div",{staticClass:"favorites-list"},[0!==t.favorites.length?e("ProductListCard",{attrs:{products:t.favorites}}):t._e()],1):t._e()])],2)],1):e("div",{staticClass:"user-container"},[e("h3",[t._v("請先登入")])])])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"user-content-no-data"},[e("div",[e("span",[t._v(" 沒有收藏 ")])])])}],r=e("1da1"),c=e("5530"),n=(e("96cf"),e("99af"),e("4de4"),e("caad"),e("2532"),e("4444")),o=e("2c28"),u=e("2f62"),d=e("f1b5"),l={name:"User",components:{UserTab:n["a"],ProductListCard:d["a"]},data:function(){return{favorites:[],products:[]}},created:function(){this.fetchProducts()},computed:Object(c["a"])({},Object(u["b"])(["isAuthenticated","user","favoriteProducts"])),watch:{favoriteProducts:function(t,a){var e=this,i=t.filter((function(t){return!(a.indexOf(t)>-1)})).concat(a.filter((function(a){return!(t.indexOf(a)>-1)}))),s=document.querySelector("#productListCard".concat(i));s.style.height=0,s.style.opacity=0,setTimeout((function(){e.fetchProducts()}),500)}},methods:{fetchProducts:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o["a"].getProducts();case 3:e=a.sent,t.products=e.data,t.favorites=t.products.filter((function(a){return t.favoriteProducts.includes(a.id)})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},v=l,f=(e("6ce5"),e("2877")),p=Object(f["a"])(v,i,s,!1,null,"6b22e9e6",null);a["default"]=p.exports},"4e7a":function(t,a,e){},"668d":function(t,a,e){"use strict";e("4e7a")},"6b0a":function(t,a,e){},"6ce5":function(t,a,e){"use strict";e("0143")},a110:function(t,a,e){},b63e:function(t,a,e){"use strict";e("a110")},f1b5:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",t._l(t.products,(function(a){return e("router-link",{key:a.id,attrs:{to:{name:"ProductDetail",params:{id:a.id}}}},[e("div",{staticClass:"product-list-card my-4",attrs:{id:"productListCard"+a.id}},[e("FavoriteHeart",{attrs:{id:a.id},on:{click:function(e){return t.removeFavorite(a.id)}}}),e("div",{staticClass:"product-list-card-image"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.image,expression:"product.image"}],attrs:{alt:""}})]),e("div",{staticClass:"product-list-card-detail"},[e("div",{staticClass:"card-policy"},[a.policy.check?e("span",{staticClass:"check-span"},[t._v(t._s(a.policy.check))]):t._e(),a.policy.cancel?e("span",{staticClass:"cancel-span"},[t._v(t._s(a.policy.cancel))]):t._e()]),e("div",{staticClass:"card-title"},[t._v(" "+t._s(a.title)+" ")]),e("div",{staticClass:"card-introduction"},[t._v(" "+t._s(a.description.introduction)+" ")]),e("div",{staticClass:"card-place"},[e("i",{staticClass:"fas fa-map-marker-alt"}),t._v(" "+t._s(a.location.country)+" "+t._s(a.location.city)+" ")]),a.planOption?e("div",{staticClass:"card-date"},[t._v(" 最早可預定日期："+t._s(t.date)+" ")]):t._e(),e("div",{staticClass:"card-bottom"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"card-rating mr-2"},[e("Star",{attrs:{rating:a.rating}}),t._v(" ("+t._s(a.ratingCount)+") ")],1),t._v(" | "),e("div",{staticClass:"card-ordered ml-2"},[a.orderCount>=1e3?e("i",{staticClass:"fab fa-hotjar"}):t._e(),t._v(" "+t._s(t._f("orderCount")(a.orderCount))+" 已訂購 ")])]),e("div",{staticClass:"card-price"},[e("Price",{attrs:{"initial-price":{price:a.price,specialPrice:a.specialPrice}}})],1)])])],1)])})),1)},s=[],r=e("1b87"),c=e("1470"),n=e("f87f"),o=e("c1df"),u=e.n(o),d=e("2708"),l={name:"ProductListCard",components:{FavoriteHeart:r["a"],Star:c["a"],Price:n["a"]},mixins:[d["b"]],props:{products:{type:Array,required:!0}},data:function(){return{date:null}},created:function(){this.date=u()(new Date).add(2,"days").format("YYYY-MM-DD")}},v=l,f=(e("02eb"),e("2877")),p=Object(f["a"])(v,i,s,!1,null,"4801c254",null);a["a"]=p.exports}}]);
//# sourceMappingURL=chunk-cc40aece.d9dde9b4.js.map