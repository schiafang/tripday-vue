(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab3e76a8"],{"02eb":function(t,a,i){"use strict";i("6b0a")},"1b87":function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"favorite-icon-wrapper"},[i("div",{ref:"signTip",staticClass:"sign-tip",style:{opacity:0,zIndex:2,transition:"opacity .2s ease-in-out"}}),t.isAuthenticated&&t.favoriteProducts.includes(t.id)?t._e():i("i",{staticClass:"far fa-heart add-favorite favorite-icon",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addFavorite(t.id)}}}),i("transition",{attrs:{name:"popup"}},[t.isAuthenticated&&t.favoriteProducts.includes(t.id)?i("i",{staticClass:"fas fa-heart remove-favorite favorite-icon",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.removeFavorite(t.id)}}}):t._e()])],1)},s=[],r=i("5530"),c=(i("a9e3"),i("2f62")),n={props:{id:{type:Number,required:!0}},computed:Object(r["a"])({},Object(c["b"])(["favoriteProducts","isAuthenticated"])),methods:{addFavorite:function(t){var a=this;if(!this.isAuthenticated)return this.$refs.signTip.style.opacity=1,void setTimeout((function(){a.$refs.signTip.style.opacity=0,a.$EventBus.$emit("openSignForm",!0)}),800);this.$store.commit("addFavorite",t)},removeFavorite:function(t){var a=this;if(!this.isAuthenticated)return this.$refs.signTip.style.opacity=1,void setTimeout((function(){a.$refs.signTip.style.opacity=0,a.$EventBus.$emit("openSignForm",!0)}),800);this.$store.commit("removeFavorite",t)}}},o=n,d=(i("668d"),i("2877")),u=Object(d["a"])(o,e,s,!1,null,null,null);a["a"]=u.exports},"4e7a":function(t,a,i){},"668d":function(t,a,i){"use strict";i("4e7a")},"6b0a":function(t,a,i){},"962d":function(t,a,i){"use strict";i("bf63")},"96fc":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"product-list-container"},[i("div",{staticClass:"breadcrumbs"},[i("router-link",{attrs:{to:"/"}},[t._v(" 首頁 ")]),i("span",[t._v(" > ")]),i("router-link",{attrs:{to:"/productlist"}},[t._v(" 台灣 ")])],1),i("div",{staticClass:"search-result-title"},[t._v(" 搜尋結果 "),i("i",{staticClass:"fas fa-quote-left ml-2"}),i("span",[t._v(t._s(t.searchString))]),i("i",{staticClass:"fas fa-quote-right"})]),i("div",{staticClass:"product-list-banner"},[i("span",[t._v(t._s(t.products.length))]),t._v("項體驗行程 ")]),i("div",{staticClass:"product-list"},[i("ProductListCard",{attrs:{products:t.products}})],1)])},s=[],r=i("1da1"),c=i("5530"),n=(i("96cf"),i("2c28")),o=i("2f62"),d=i("f1b5"),u={name:"ProductList",components:{ProductListCard:d["a"]},metaInfo:function(){return{title:this.title}},data:function(){return{products:[],searchString:"",title:""}},created:function(){this.fetchData(this.$route.query.q),this.title="".concat(this.$route.query.q," 精選商品 - tripday")},computed:Object(c["a"])({},Object(o["b"])(["isLoading"])),watch:{$route:function(t){this.fetchData(t.query.q),this.title="".concat(t.query.q," 精選商品 - tripday")}},methods:{fetchData:function(t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var e,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(i.prev=0,a.$store.state.isLoading=!0,!a.$route.query.q){i.next=11;break}return a.searchString=a.$route.query.q,i.next=6,n["a"].searchProducts(t);case 6:e=i.sent,a.products=e.data,a.$store.state.isLoading=!1,i.next=17;break;case 11:return a.searchString="台灣",i.next=14,n["a"].getProducts();case 14:s=i.sent,a.products=s.data,a.$store.state.isLoading=!1;case 17:i.next=23;break;case 19:i.prev=19,i.t0=i["catch"](0),a.$store.state.isLoading=!1,console.log(i.t0);case 23:case"end":return i.stop()}}),i,null,[[0,19]])})))()}}},l=u,p=(i("962d"),i("2877")),f=Object(p["a"])(l,e,s,!1,null,"fdca3246",null);a["default"]=f.exports},bf63:function(t,a,i){},f1b5:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",t._l(t.products,(function(a){return i("router-link",{key:a.id,attrs:{to:{name:"ProductDetail",params:{id:a.id}}}},[i("div",{staticClass:"product-list-card my-4",attrs:{id:"productListCard"+a.id}},[i("FavoriteHeart",{attrs:{id:a.id},on:{click:function(i){return t.removeFavorite(a.id)}}}),i("div",{staticClass:"product-list-card-image"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.image,expression:"product.image"}],attrs:{alt:""}})]),i("div",{staticClass:"product-list-card-detail"},[i("div",{staticClass:"card-policy"},[a.policy.check?i("span",{staticClass:"check-span"},[t._v(t._s(a.policy.check))]):t._e(),a.policy.cancel?i("span",{staticClass:"cancel-span"},[t._v(t._s(a.policy.cancel))]):t._e()]),i("div",{staticClass:"card-title"},[t._v(" "+t._s(a.title)+" ")]),i("div",{staticClass:"card-introduction"},[t._v(" "+t._s(a.description.introduction)+" ")]),i("div",{staticClass:"card-place"},[i("i",{staticClass:"fas fa-map-marker-alt"}),t._v(" "+t._s(a.location.country)+" "+t._s(a.location.city)+" ")]),a.planOption?i("div",{staticClass:"card-date"},[t._v(" 最早可預定日期："+t._s(t.date)+" ")]):t._e(),i("div",{staticClass:"card-bottom"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"card-rating mr-2"},[i("Star",{attrs:{rating:a.rating}}),t._v(" ("+t._s(a.ratingCount)+") ")],1),t._v(" | "),i("div",{staticClass:"card-ordered ml-2"},[a.orderCount>=1e3?i("i",{staticClass:"fab fa-hotjar"}):t._e(),t._v(" "+t._s(t._f("orderCount")(a.orderCount))+" 已訂購 ")])]),i("div",{staticClass:"card-price"},[i("Price",{attrs:{"initial-price":{price:a.price,specialPrice:a.specialPrice}}})],1)])])],1)])})),1)},s=[],r=i("1b87"),c=i("1470"),n=i("f87f"),o=i("c1df"),d=i.n(o),u=i("2708"),l={name:"ProductListCard",components:{FavoriteHeart:r["a"],Star:c["a"],Price:n["a"]},mixins:[u["b"]],props:{products:{type:Array,required:!0}},data:function(){return{date:null}},created:function(){this.date=d()(new Date).add(2,"days").format("YYYY-MM-DD")}},p=l,f=(i("02eb"),i("2877")),v=Object(f["a"])(p,e,s,!1,null,"4801c254",null);a["a"]=v.exports}}]);
//# sourceMappingURL=chunk-ab3e76a8.093edd9d.js.map